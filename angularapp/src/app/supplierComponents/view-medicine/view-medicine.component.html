<div class="viewFeed container-fluid min-vh-100 d-flex flex-column p-3">
    <div class="container-fluid shadow-lg rounded py-3 min-vh-100">
      <p class="display-6 text-center my-3 bricolage-grotesque-Font">Medicines</p>
  
      <div class="container-fluid py-4">
        <div class="mb-3">
          <input type="text" class="form-control" placeholder="Search by medicine name..." (input)="search($event)">
        </div>
  
        <div class="table-responsive rounded">
          <table class="table table-hover shadow">
            <thead class="libertinus-sans-bold">
              <tr>
                <th class="th-bgColor text-center">S.No</th>
                <th class="th-bgColor text-center">Medicine Name</th>
                <th class="th-bgColor text-center">Type</th>
                <th class="th-bgColor text-center">Manufacturer</th>
                <th class="th-bgColor text-center">Unit</th>
                <th class="th-bgColor text-center">Available Units</th>
                <th class="th-bgColor text-center">Price Per Unit</th>
                <th class="th-bgColor text-center">Dosage</th>
                <th class="th-bgColor text-center">Expiry</th>
                <th class="th-bgColor text-center">Action</th>
              </tr>
            </thead>
  
            <ng-container *ngIf="loading && !showEmptyMessage">
              <tbody>
                <tr>
                  <td colspan="10" class="text-center align-middle">
                    <div class="d-flex justify-content-center align-items-center" style="height:150px;">
                      <mat-progress-spinner mode="indeterminate" diameter="40" color="primary"></mat-progress-spinner>
                    </div>
                  </td>
                </tr>
              </tbody>
            </ng-container>
  
            <tbody class="libertinus-sans-regular" *ngIf="paginatedMedicines.length > 0 && !loading">
              <tr *ngFor="let med of paginatedMedicines; let i=index">
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{(currentPage - 1) * itemsPerPage + i + 1}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{med.medicineName}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{med.type}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{med.manufacturer}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{med.unit}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}"
                    [matTooltip]="med.availableUnits === 0 ? 'Out of Stock' : ''">
                  {{med.availableUnits}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{med.pricePerUnit}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{med.dosage}}
                </td>
                <td class="text-center" [ngClass]="{'text-muted bg-light': med.availableUnits === 0}">
                  {{med.expiryDate | date}}
                </td>
                <td class="d-flex gap-1 justify-content-center">
                  <button class="ac-btn" mat-fab color="accent" [routerLink]="['/supplier/add-medicine', med._id]" routerLinkActive="router-link-active">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button class="ac-btn" mat-fab color="warn" (click)="deleteMed(med._id)">
                    <mat-icon class="m-auto">delete</mat-icon>
                  </button>
                </td>
              </tr>
            </tbody>
  
            <ng-container *ngIf="showEmptyMessage && !loading">
              <tbody>
                <tr>
                  <td colspan="10" class="text-center">No Medicines available.</td>
                </tr>
              </tbody>
            </ng-container>
          </table>
        </div>
      </div>
  
      <div class="d-flex justify-content-center align-items-center mt-3 pagination" *ngIf="filteredMedicnes.length > 0">
        <button class="btn btn-outline-success btn-sm me-2" (click)="goToPreviousPage()">Prev</button>
        <span>Page {{currentPage}} of {{totalPages}}</span>
        <button class="btn btn-outline-success btn-sm ms-2" (click)="goToNextPage()">Next</button>
      </div>
    </div>
  </div>